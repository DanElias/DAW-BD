<!DOCTYPE html>
<html lang="es">
    <meta charset="UTF-8">
    
    <title>Store</title>
    
    <head>
        <script type="text/javascript" src="script.js"></script>
        <link href="main.css" rel="stylesheet" type="text/css">
    </head>
        
    <body>
       
        <nav> 
            <ul>
                <li><a class="active" href="index.html">Home</a></li>
                <li><a href="passwords.html">Passwords</a></li>
                <li><a href="tienda.html">Tienda</a></li>
                <li><a href="reference.html">IEEE Generator</a></li>
                <li><a href="index.html#preguntas">Preguntas</a></li>
                <li><a href="#contacto">Contacto</a></li>
            </ul> 
        </nav>
        
        <header id="tienda_header"> 
            <section>
                <h3>The Back Alley Store</h3>
            </section>
        </header>
        

        <section class="parallax2" id="tienda_body">
            <h6>-</h6>
            <article class="information">
            <h6>-</h6>
                
                <table class="third_table">
                     <tr> 
                        <td class="table_text">
                            <br><br>
                            <img src="img/everybody.jpg" alt="logic" height="300px" widht="300px"><br> 
                            <strong>Everybody</strong><br>by Logic<br><h id="price1">$15</h><br><br>
                            <audio
                                   controls
                                   src="sound/logic.mp3">
                                Your browser does not support the
                                <code>audio</code> element.
                            </audio>
                            
                            <br><br>
                            
                            <article id="compra_uno">
                                <h id="validar1">Available!<br></h>
                                <strong id="carrito">Add to cart</strong>
                                <button class="boton_sumar" id="boton_sumar1">&nbsp;&nbsp;+&nbsp;&nbsp;</button>
                                <button class="boton_restar" id="boton_restar1">&nbsp;&nbsp;-&nbsp;&nbsp;</button>
                                <br><br>
                                <h id="cantidad1">Cantidad a pagar: <br>Monto a pagar: </h>
                                <br>
                            </article>    
                            
                         </td>
                         
                         <td class="table_text">
                            <br><br>
                            <img src="img/trench.png" alt="chlorine" height="300px" widht="300px"><br> 
                            <strong>Trench</strong><br>by Twenty One Pilots<br><h id="price1">$21</h><br><br>
                            <audio
                                   controls
                                   src="sound/chlorine.mp3">
                                Your browser does not support the
                                <code>audio</code> element.
                            </audio>
                             
                            <br><br>
                            
                            <article id="compra_dos">
                                <h id="validar2">Available!<br></h>
                                <strong id="carrito">Add to cart</strong>
                                <button class="boton_sumar" id="boton_sumar2">&nbsp;&nbsp;+&nbsp;&nbsp;</button>
                                <button class="boton_restar" id="boton_restar2">&nbsp;&nbsp;-&nbsp;&nbsp;</button>
                                <br><br>
                                <h id="cantidad2">Cantidad a pagar: <br>Monto a pagar: </h>
                                <br>
                            </article>    
                             
                         </td>
                         
                         <td class="table_text">
                            <br><br>
                            <img src="img/arcade.jpg" alt="arcade" height="300px" widht="300px"><br> 
                            <strong>Everything Now</strong><br>by Arcade Fire<br><h id="price3">$10</h><br><br>
                            <audio
                                   controls
                                   src="sound/arcade.mp3">
                                Your browser does not support the
                                <code>audio</code> element.
                            </audio>
                             
                              <br><br>
                            
                            <article id="compra_tres">
                                <h id="validar3">Available!<br></h>
                                <strong id="carrito">Add to cart</strong>
                                <button class="boton_sumar" id="boton_sumar3">&nbsp;&nbsp;+&nbsp;&nbsp;</button>
                                <button class="boton_restar" id="boton_restar3">&nbsp;&nbsp;-&nbsp;&nbsp;</button>
                                <br><br>
                                <h id="cantidad3">Cantidad a pagar: <br>Monto a pagar: </h>
                                <br>
                            </article>  
                         </td>
                         
                    </tr>
                    
                    <tr>
                        <td class="table_text" colspan="3">
                            <strong><hr>Detalles de tu compra:<hr></strong>
                            <p id="detalles"></p>
                        
                        </td>
                    </tr>
                    
                 </table>
            </article>
        </section>
        
        <aside></aside>
        
        <footer id="contacto"> 
            <p>Contacto</p>
            <p style="font-size: 20px">Daniel Elias Becerra &nbsp; &nbsp; &nbsp;  A01208905 <br> daniel.eliasbecerra98@gmail.com<br><br>
                Editor HTML: Brackets <br> <a href="http://brackets.io/">brackets.io</a> </p>
            
            <form action="enviar_mensaje">
                MÃ¡ndame un mensaje!<br>
                <input type="text" name="name" value="Nombre completo">
                <br>
                <input type="text" name="email" value="Email">
                <br>
                <input type="text" name="email" value="Mensaje">
                <br>
                <input type="submit" value="Enviar">
            </form> 
        </footer>
        
    </body>
    
     <script type="text/javascript">
        var productos; // el arreglo de productos cada producto tiene sus respectivos botones y cantidad agregada
        document.body.onload=main;
         
        function main(){
            var product1={art:document.getElementById("compra_uno"), htmlcantidad: document.getElementById("cantidad1"), htmlvalidar: document.getElementById("validar1"),bs:document.getElementById("boton_sumar1"), br:document.getElementById("boton_restar1"), cantidad:0, stock:3, nombre:"Everybody by Logic",precio:15};
            
            productos=[product1];
            
            var product2={art:document.getElementById("compra_dos"),htmlcantidad: document.getElementById("cantidad2"), htmlvalidar: document.getElementById("validar2"),bs:document.getElementById("boton_sumar2"), br:document.getElementById("boton_restar2"), cantidad:0, stock:4, nombre:"Trench by TwentyOnePilots",precio:21};
            
            productos.push(product2);
            
            var product3={art:document.getElementById("compra_tres"),htmlcantidad: document.getElementById("cantidad3"), htmlvalidar: document.getElementById("validar3"),bs:document.getElementById("boton_sumar3"), br:document.getElementById("boton_restar3"), cantidad:0, stock:3, nombre:"Everything Now by Arcade Fire",precio:10};
            
            productos.push(product3);
            
            for(var i=0; i<productos.length;i++){
                productos[i].bs.addEventListener('click', sumar);// agregar el evento
                productos[i].br.addEventListener('click', restar);// agregar el evento
            }    
        }
         
        function sumar(evento){
            for(var i=0; i<productos.length; i++){
                if(productos[i].bs.id==evento.target.id && productos[i].stock!=0){
                    productos[i].cantidad++;
                    productos[i].stock--;
                    productos[i].htmlcantidad.innerHTML="Cantidad a pagar: "+productos[i].cantidad+"<br>Monto a pagar: "+productos[i].cantidad*productos[i].precio+"$";
                }
                if(productos[i].stock-1<0){
                    productos[i].htmlvalidar.style.color="red";
                    productos[i].htmlvalidar.style.fontSize="20px";
                    productos[i].htmlvalidar.innerHTML="Sold Out. Sorry! <br>";
                }
            }
            actualizar();
        }
         
        function restar(evento){
            for(var i=0; i<productos.length; i++){
                if(productos[i].br.id==evento.target.id && productos[i].cantidad-1>=0){
                    productos[i].cantidad--;
                    productos[i].stock++;
                    productos[i].htmlcantidad.innerHTML="Cantidad a pagar: "+productos[i].cantidad+"<br>Monto a pagar: "+productos[i].cantidad*productos[i].precio+"$";
                }
                if(productos[i].stock+1>0){
                    productos[i].htmlvalidar.style.color="limegreen";
                    productos[i].htmlvalidar.style.fontSize="20px";
                    productos[i].htmlvalidar.innerHTML="Available! <br>";
                }
            }
            actualizar();
        }
         
        function actualizar(){
            var cantidad_total=0;
            var monto_total=0;
            var iva=0.08;
            
             for(var i=0; i<productos.length; i++){
                 cantidad_total=cantidad_total+productos[i].cantidad;
                 monto_total=monto_total+productos[i].precio*productos[i].cantidad;
             }
            total=monto_total+monto_total*iva;
            
            document.getElementById("detalles").innerHTML="La cantidad total de productos es: "+cantidad_total+"<br>El monto total a pagar(sin IVA): "+monto_total+" $<br> La cantidad a pagar de IVA(8%) es: "+monto_total*iva+" $<br><hr><strong> El monto total a pagar (con iva): "+total+" $</strong>";
        }
         
        </script>
</html>